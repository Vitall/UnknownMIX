(function(){Mix={namespace:{},cache:true,path:{},synchronous:false,multiextended:true,absrtacts:false,interfaces:true,debug:false,debugPrefix:'',_count:0,_loadingCount:0,_modules:{},_download:[],namespace:function(a){var b=a.split('.'),current=a.length>0?Mix.namespace[b[0]]:Mix.namespace;if(current===undefined){current=Mix.namespace[b[0]]={}}for(var i=1;i<b.length;++i){current=current[b[i]]=current[b[i]]||{}}return current},apply:function(o,c,a){if(a){Mix.apply(o,a)}if(o&&c&&typeof c=='object'){for(var p in c){o[p]=c[p]}}return o},config:function(a){return this.apply(this,a)},log:function(){},info:function(){},warning:function(){},error:function(){},_console:function(a,b){},define:function(){var d='',requires=[],config={};switch(arguments.length){case 2:d=arguments[0];config=arguments[1];break;case 3:d=arguments[0];requires=arguments[1]||[];config=arguments[2];break;default:throw('');}var e=d.split('.');var g=e[e.length-1];var h=this.namespace(e.slice(0,e.length-1).join('.'));if(config.extend!=undefined){if(typeof config.extend=='string'){config.extend=[config.extend]}var k=[];var l=[];var m=[];for(var i in config.extend){var n=config.extend[i];requires.push(n);k[i]=config.extend[i].split('.');l[i]=k[i][k[i].length-1];m[i]=this.namespace(k[i].slice(0,k[i].length-1).join('.'))}delete config.extend}if(config.implement!=undefined){if(typeof config.implement=='string'){config.implement=[config.implement]}var o=[];for(var i in config.implement){var p=config.implement[i];requires.push(p);o.push(p)}}var q=[];if(config.abstract==true){if(config.methods!==undefined){q=config.methods}}Mix.module({name:d,requires:requires,body:function(){var a={},newClass=Mix.Class.create(config);for(var i in m){if(m.length>1&&Mix.multiextended==false){return false}a[i]=m[i]&&m[i][l[i]]||Mix.Class;if(a[i].prototype.implement!==undefined){o=o.concat(a[i].prototype.implement)}if(a[i].prototype.abstract==true&&a[i].prototype.methods!==undefined){q=q.concat(a[i].prototype.methods)}var b=newClass.prototype;newClass=a[i].create();newClass.prototype=Mix.apply(newClass.prototype,b)}if(config.abstract==undefined){newClass.prototype.abstract=false}for(var f in config){if(!config.hasOwnProperty(f))continue;if(/static_/.test(f)){var c=f.substring(7);newClass[c]=config[f]}}if(config.abstract!==true){if(Mix.interfaces==true){for(var i in o){p=Mix.namespace(o[i]);p=p.prototype;if(p.methods!==undefined){for(var j in p.methods){if(newClass.prototype[p.methods[j]]==undefined){return false}}}}for(var i in q){if(newClass.prototype[q[i]]==undefined){return false}}}}else{newClass.prototype.methods=q;newClass.prototype.implement=o}h[g]=newClass}})},module:function(a){a.loaded=false;this._modules[a.name]=a;this._download.push(a);this._count++;this.process()},process:function(){var a=false;for(var i=0;i<this._download.length;++i){var m=this._download[i];m.requires=m.requires||[];var b=true;for(var r=0;r<m.requires.length;++r){var c=m.requires[r],parts=c.split(':'),prefix='';if(parts.length==2){prefix=parts[0];c=parts[1]}else if(parts.length==0||parts.length>2){throw('');}if(!this._modules[c]){b=false;this.loadScript(c,m.name,prefix)}else if(!this._modules[c].loaded){b=false}}if(b&&m.body){this._download.splice(i,1);m.loaded=true;m.body();a=true;i--;this.onProgress(this._count,this._count-this._download.length)}}if(a){this.process()}else if(this._loadingCount==0&&this._download.length!=0){var d=[];for(i=0;i<this._download.length;i++){d.push(this._download[i].name)}}},onProgress:function(a,b){if(a<=0)return;var p=b*100/a},loadScript:function(a,b,c){var d='';if(c){if(!(d=this.path[c]))throw('Undefined path: '+c);d+=d.indexOf(d.length-1)=='/'?'':'/'}var e=d+a.replace(/\./g,'/')+'.js'+((!this.cache)?'?nocache='+new Date().getTime():'');this._modules[a]={name:a,requires:[],loaded:false,body:null};this._loadingCount++;if(this.synchronous){this.injectScript(e,function(){this._loadingCount--;this.process()},function(){throw('');},this)}else{this.loadXHRScript(e,function(){this._loadingCount--;this.process()},function(){throw('');},this)}},loadStyle:function(a){var b=a.replace(/\./g,'/')+'.css';var c=document.createElement('link');c.type='text/css';c.rel='stylesheet';c.href=b;document.getElementsByTagName('head')[0].appendChild(c)},loadXHRScript:function(a,b,c,d){var f=false,fileName=a.split('/').pop(),xhr,status;if(typeof XMLHttpRequest!=='undefined'){xhr=new XMLHttpRequest()}else{xhr=new ActiveXObject('Microsoft.XMLHTTP')}try{xhr.open('GET',a,false);xhr.send(null)}catch(e){f=true}status=(xhr.status===1223)?204:xhr.status;if(!f){f=(status===0)}if(f){c.call(this," ",this.synchronous)}else if(status>=200&&status<300){new Function(xhr.responseText+"\n//@ sourceURL="+fileName)();b.call(d)}else{c.call(this," ",this.synchronous)}xhr=null},injectScript:function(a,b,c,d){var e=document.createElement('script'),me=this,onLoadFn=function(){me.cleanupScriptElement(e);b.call(d)},onErrorFn=function(){me.cleanupScriptElement(e);c.call(d)};e.type='text/javascript';e.src=a;e.onload=onLoadFn;e.onerror=onErrorFn;e.onreadystatechange=function(){if(this.readyState==='loaded'||this.readyState==='complete'){onLoadFn()}};document.getElementsByTagName('head')[0].appendChild(e);return e},cleanupScriptElement:function(a){a.onload=null;a.onreadystatechange=null;a.onerror=null;return this},obj:function(){var a=Array.prototype.slice.call(arguments);var b=a.shift();this.autoload(b);var c=Mix.namespace(b);if(c.prototype.abstract==true&&Mix.absrtacts==true){return false}return new c(a)},isFace:function(a,b){if(typeof b=='string'){b=[b]}Mix.autoload(b);for(var i in b){var c=Mix.namespace(b[i]);for(var j in c.prototype.methods){if(a[c.prototype.methods[j]]==undefined){return false}}}return true},autoload:function(a){if(typeof a=='string'){a=[a]}Mix.config({synchronous:false,cache:true}).module({requires:a})}};var s=false,fnTest=/xyz/.test(function(){})?/\b_super\b/:/.*/;Mix.Class=function(){};Mix.Class.create=function(e){var f=this.prototype;s=true;var g=new this();s=false;for(var h in e){g[h]=typeof e[h]=="function"&&typeof f[h]=="function"&&fnTest.test(e[h])?(function(c,d){return function(){var a=this._super;this._super=f[c];var b=d.apply(this,arguments);this._super=a;return b}})(h,e[h]):e[h]}function Class(a){if(!s&&this.init)this.init.apply(this,a)}Class.prototype=Mix.apply(Class.prototype,g);Class.prototype.constructor=Class;Class.create=arguments.callee;return Class};Function.prototype.bind=function(a){var b=this;return function(){return b.apply(a,arguments)}}})();